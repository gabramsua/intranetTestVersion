{% extends 'intranetBundle::layout.html.twig' %}

 {% block contenido %}
<script>
    var app = angular.module('MyApp',['ngRoute', 'ngMaterial', 'ngMessages', 'material.svgAssetsCache', 'ngMdIcons']);
    app.config(function($interpolateProvider){
        $interpolateProvider.startSymbol('{[{').endSymbol('}]}');
    });
    app.controller('incomingsController', incomingsController);
    
    function incomingsController($scope, $mdDialog, $http){
        
        $scope.getAllHours = function(){
            
            $http({
                method: 'GET',
                url: window.location.pathname+'/../../api/forms/hours',
                dataType: 'json',
                headers: {'Content-Type': 'application/json'}
            })
            .then(function success(response){
                $scope.hoursList = response.data.hoursList;
                $scope.usershoursList = response.data.usershoursList;
            }, function error(response){
                console.log("Error:" +response.statusText);
            });
        }

        $scope.getAllVacations = function(){
            
            $http({
                method: 'GET',
                url: window.location.pathname+'/../../api/forms/vacations',
                dataType: 'json',
                headers: {'Content-Type': 'application/json'}
            })
            .then(function success(response){
                $scope.vacationsList = response.data.vacationsList;
                $scope.usersvacationsList = response.data.usersvacationsList;
            }, function error(response){
                console.log("Error:" +response.statusText);
            });
        }
        
        $scope.getAllExpenses = function(){
            
            $http({
                method: 'GET',
                url: window.location.pathname+'/../../api/forms/expenses',
                dataType: 'json',
                headers: {'Content-Type': 'application/json'}
            })
            .then(function success(response){
                $scope.expensesList = response.data.expensesList;
                $scope.usersexpensesList = response.data.usersexpensesList;
            }, function error(response){
                console.log("Error:" +response.statusText);
            });
        }

        $scope.getAllTrips = function(){
            
            $http({
                method: 'GET',
                url: window.location.pathname+'/../../api/forms/trips',
                dataType: 'json',
                headers: {'Content-Type': 'application/json'}
            })
            .then(function success(response){
                $scope.tripsList = response.data.tripsList;
                $scope.userstripsList = response.data.userstripsList;
            }, function error(response){
                console.log("Error:" +response.statusText);
            });
        }

        $scope.getAllHome = function(){
            
            $http({
                method: 'GET',
                url: window.location.pathname+'/../../api/forms/homes',
                dataType: 'json',
                headers: {'Content-Type': 'application/json'}
            })
            .then(function success(response){
                $scope.homesList = response.data.homesList;
                $scope.usershomesList = response.data.usershomesList;
            }, function error(response){
                console.log("Error:" +response.statusText);
            });
        }
        
        
    }
    </script>




















<div ng-cloak ng-app="MyApp" ng-controller="incomingsController" ng-init="">
    <h2>HOURS</h2>
    <md-list ng-init="getAllHours()">
        <md-divider></md-divider>
        <md-divider></md-divider>
        <md-list-item style="font-size: large" ng-model="prueba">
            <span style="width: 15%">User</span>
            <span style="width: 60%">Date</span>
            <span style="width: 10%">Status</span>
        </md-list-item>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <div ng-repeat="form in hoursList">
        <div ng-repeat="user in usershoursList" ng-if="user.id_form == form.id">
           
            <md-list-item ng-click="showUpdateHoursDialog($event, form)">
                <span style="width: 15%">{[{user.login}]}</span>
                <span style="width: 60%">{[{form.send}]}</span>
                <span style="width: 10%">
                  <div ng-if="form.status == 0" style="background: grey"></div>
                </span>
            </md-list-item>

            <md-divider></md-divider>
        </div>
        </div>
    </md-list>



    <h2>VACATIONS</h2>
    <md-list ng-init="getAllVacations()">
        <md-divider></md-divider>
        <md-divider></md-divider>
        <md-list-item style="font-size: large" ng-model="prueba">
            <span style="width: 15%">User</span>
            <span style="width: 60%">Date</span>
        </md-list-item>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <div ng-repeat="form in vacationsList">
        <div ng-repeat="user in usersvacationsList" ng-if="user.id_form == form.id">
           
            <md-list-item ng-click="showUpdateHoursDialog($event, form)">
                <span style="width: 15%">{[{user.login}]}</span>
                <span style="width: 60%">{[{form.send}]}</span>
            </md-list-item>

            <md-divider></md-divider>
        </div>
        </div>
    </md-list>



    <h2>EXPENSES</h2>
    <md-list ng-init="getAllExpenses()">
        <md-divider></md-divider>
        <md-divider></md-divider>
        <md-list-item style="font-size: large" ng-model="prueba">
            <span style="width: 15%">User</span>
            <span style="width: 60%">Date</span>
        </md-list-item>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <div ng-repeat="form in expensesList">
        <div ng-repeat="user in usersexpensesList" ng-if="user.id_form == form.id">
           
            <md-list-item ng-click="showUpdateHoursDialog($event, form)">
                <span style="width: 15%">{[{user.login}]}</span>
                <span style="width: 60%">{[{form.send}]}</span>
            </md-list-item>

            <md-divider></md-divider>
        </div>
        </div>
    </md-list>



    <h2>TRIPS</h2>
    <md-list ng-init="getAllTrips()">
        <md-divider></md-divider>
        <md-divider></md-divider>
        <md-list-item style="font-size: large" ng-model="prueba">
            <span style="width: 15%">User</span>
            <span style="width: 60%">Date</span>
        </md-list-item>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <div ng-repeat="form in tripsList">
        <div ng-repeat="user in userstripsList" ng-if="user.id_form == form.id">
           
            <md-list-item ng-click="showUpdateHoursDialog($event, form)">
                <span style="width: 15%">{[{user.login}]}</span>
                <span style="width: 60%">{[{form.send}]}</span>
            </md-list-item>

            <md-divider></md-divider>
        </div>
        </div>
    </md-list>



    <h2>HOME</h2>
    <md-list ng-init="getAllHome()">
        <md-divider></md-divider>
        <md-divider></md-divider>
        <md-list-item style="font-size: large" ng-model="prueba">
            <span style="width: 15%">User</span>
            <span style="width: 60%">Date</span>
        </md-list-item>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <div ng-repeat="form in homesList">
        <div ng-repeat="user in usershomesList" ng-if="user.id_form == form.id">
           
            <md-list-item ng-click="showUpdateHoursDialog($event, form)">
                <span style="width: 15%">{[{user.login}]}</span>
                <span style="width: 60%">{[{form.send}]}</span>
            </md-list-item>

            <md-divider></md-divider>
        </div>
        </div>
    </md-list>
</div>
{% endblock %}
